#include <QApplication>
#include <QWidget>
#include <QPushButton>
#include <QVBoxLayout>
#include <QHBoxLayout>
#include <QLabel>
#include <QProcess>

class scmd : public QWidget {
public:
    scmd() {
        QVBoxLayout *mainLayout = new QVBoxLayout(this);

        // Title Layout
        QLabel *titleLabel = new QLabel("<font color='blue' size='5'><b>SYSTEM INFORMATIONS and TOOLS</b></font>", this);
        mainLayout->addWidget(titleLabel);

        // Button Layout
        QVBoxLayout *buttonLayout = new QVBoxLayout();

        // CPU Info Button
        QPushButton *cpuInfoButton = createButton("CPU Infos", "cat /proc/cpuinfo | kdialog --textbox - --geometry 700x500 --title 'CPU infos'");
        buttonLayout->addWidget(cpuInfoButton);

        // Ethernet Interfaces Button
        QPushButton *ethernetButton = createButton("Ethernet Interfaces", "ifconfig | kdialog --textbox - --geometry 700x500 --title 'View an ethernet network interface'");
        buttonLayout->addWidget(ethernetButton);

        // Wireless Interfaces Button
        QPushButton *wirelessButton = createButton("Wireless Interfaces", "iwconfig | kdialog --textbox - --geometry 700x500 --title 'Current wireless network interface'");
        buttonLayout->addWidget(wirelessButton);

        // USB Devices Button
        QPushButton *usbButton = createButton("USB Devices", "lsusb | kdialog --textbox - --geometry 700x500 --title 'USB devices'");
        buttonLayout->addWidget(usbButton);

        // GPU Info Button
        QPushButton *gpuInfoButton = createButton("GPU Info", "lspci | grep -i vga | kdialog --textbox - --geometry 700x500 --title 'GPU Info'");
        buttonLayout->addWidget(gpuInfoButton);

        // Memory Info Button
        QPushButton *memoryInfoButton = createButton("Memory Info", "free -h | kdialog --textbox - --geometry 700x500 --title 'Memory Info'");
        buttonLayout->addWidget(memoryInfoButton);

        mainLayout->addLayout(buttonLayout);
        setLayout(mainLayout);
    }

private:
    QPushButton* createButton(const QString& label, const QString& action) {
        QPushButton *button = new QPushButton(label, this);
        connect(button, &QPushButton::clicked, this, [=]() {
            QProcess::startDetached("bash", QStringList() << "-c" << action);
        });
        return button;
    }
};

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    scmd window;
    window.setWindowTitle("Slackware Commander");
    window.show();

    return app.exec();
}
